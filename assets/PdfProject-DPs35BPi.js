import{l as a,c as z,b as t,u as o,g as D,o as F,i as c,a as i,B as v}from"./index-DkiEf_42.js";import{s as C}from"./index-CRviYiyA.js";import{a as f}from"./axios-CCb-kr4I.js";import{m as k}from"./mustache-lDDT9aR0.js";import{h as A}from"./html2pdf-Ej1PnI55.js";import"./_commonjsHelpers-BosuxZz1.js";const N={style:{"margin-top":"1rem"}},U={__name:"PdfProject",setup(T){const b=a([{label:"A4",value:"a4"},{label:"A5",value:"a5"},{label:"80 mm",value:[80,230]},{label:"72 mm",value:[72,230]}]),g=a([{label:"Times New Roman",value:"Times New Roman"},{label:"Arial",value:"Arial"},{label:"Georgia",value:"Georgia"},{label:"Verdana",value:"Verdana"}]),s=a(!1),m=a(null),p=a(null),P=()=>{s.value=!0},V=async()=>{s.value=!1,await h()},h=async()=>{try{let e=(await f.get("/templates/projectTemplate.html")).data;const d=(await f.get("/templates/response")).data.result;d.salesInvoiceDetails.forEach((r,y)=>{r.serialNo=y+1}),d.selectedFont=p.value||"Arial";let S=k.render(e,d);const n=document.createElement("div");n.innerHTML=S,document.body.appendChild(n);const w={margin:[2,2],filename:"sales-detail.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"mm",format:m.value||"a4",orientation:"portrait"}};A().from(n).set(w).toPdf().get("pdf").then(r=>{r.autoPrint(),window.open(r.output("bloburl"),"_blank")}),document.body.removeChild(n)}catch(u){console.error("Error generating PDF:",u)}};return(u,e)=>(F(),z("div",null,[t(o(c),{class:"m-8",label:"Print",onClick:P}),t(o(C),{visible:s.value,"onUpdate:visible":e[2]||(e[2]=l=>s.value=l),header:"Select Paper Size",modal:!0,closable:!0,style:{width:"30vw"}},{default:D(()=>[i("div",null,[e[3]||(e[3]=i("p",null,"Select the paper size for the PDF:",-1)),t(o(v),{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=l=>m.value=l),options:b.value,optionLabel:"label",optionValue:"value",placeholder:"Select Paper Size"},null,8,["modelValue","options"]),e[4]||(e[4]=i("p",{style:{"margin-top":"1rem"}},"Select the font for the PDF:",-1)),t(o(v),{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=l=>p.value=l),options:g.value,optionLabel:"label",optionValue:"value",placeholder:"Select Font"},null,8,["modelValue","options"]),i("div",N,[t(o(c),{label:"Confirm",onClick:V})])])]),_:1},8,["visible"])]))}};export{U as default};
