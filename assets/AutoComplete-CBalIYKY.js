import{a as w}from"./axios-CCb-kr4I.js";import{s as M}from"./index-t2sg4jLf.js";import{_ as x,l as s,c as A,a as i,b as h,g as F,u as g,D as N,o as z,A as C}from"./index-DkiEf_42.js";const L={class:"card flex justify-center"},V={class:"dropdown-container"},b={__name:"AutoComplete",setup(S){const m=s(null),d=s([]),a=s([]),v=s(0),o=s(0),u=s(""),f=async(e,t,l="")=>{let n=!1;try{n=!0,console.log("filter = ",l),console.log(`/month/lazy?first=${e}&rows=${t-e}&filters[monthName.name][value]=${l}&filters[monthName.name][matchMode]=contains`);const r=(await w.get(`/month/lazy?first=${e}&rows=${t-e}&filters[monthName.name][value]=${l}&filters[monthName.name][matchMode]=contains`)).data;if(r.success===!0&&Array.isArray(r.result)){const y=r.result.map(c=>({label:`${c.id} - ${c.monthName.name}-${c.endDate}`,value:c.id}));a.value=[...a.value,...y],d.value=a.value,v.value=r.totalCount,o.value=t}else console.error("Unexpected API response:",r)}catch(p){console.error("Error fetching months:",p)}finally{n=!1}},_=e=>{const{first:t,last:l}=e;if(l>=a.value.length&&a.value.length<v.value){const n=o.value+20;console.log(`Fetching months from ${o.value} to ${n}`),f(o.value,n,u.value)}},$=e=>{console.log(e),u.value=e.query,o.value=0,a.value=[],console.log(`Fetching filtered months from ${o.value} to ${o.value+20} filter = ${u.value}`),f(o.value,o.value+20,u.value)};return(e,t)=>(z(),A(N,null,[t[1]||(t[1]=i("h2",null,"Month Autocomplete",-1)),h(g(C),null,{default:F(()=>[i("div",L,[i("div",V,[h(g(M),{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=l=>m.value=l),suggestions:d.value,onComplete:$,virtualScrollerOptions:{lazy:!0,itemSize:50,delay:20,onLazyLoad:_},optionLabel:"label",placeholder:"Select a Month",class:"w-full md:w-56",dropdown:""},null,8,["modelValue","suggestions","virtualScrollerOptions"])])])]),_:1})],64))}},E=x(b,[["__scopeId","data-v-72a10650"]]);export{E as default};
