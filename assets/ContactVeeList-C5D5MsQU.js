import{d as N,x as U,l as d,m as M,o as f,c as g,a as o,e as V,t as D,n as _,g as i,b as s,u as l,p as r,i as y,h as $,q as B,A as L,F as x,s as k,E as j,f as A,v as I,_ as T}from"./index-DkiEf_42.js";import{r as G,e as R}from"./vee-validate-rules.esm-BzTVDerd.js";import{a as w}from"./axios-CCb-kr4I.js";import{s as z}from"./index-CRviYiyA.js";const H={key:0},J={key:1},K={class:"flex items-center gap-4 mb-4"},O={class:"flex items-center gap-4 mb-4"},Q={class:"flex items-center gap-4 mb-4"},W={class:"flex items-center gap-4 mb-4"},X={class:"flex justify-content-center gap-3"},Y={key:3,class:"success-message"},Z=N({__name:"ContactVeeList",setup(P){U("required",G),U("email",R);const n=d([]),C=d(!0),m=d(null),p=d(!1),b=d(null),v=d(null),a=d({name:"",email:"",subject:"",message:""}),q=u=>{v.value={...u},a.value.name=u.name,a.value.email=u.email,a.value.subject=u.subject,a.value.message=u.message,p.value=!0},E=()=>{p.value=!1,b.value=null},S=async()=>{if(v.value)try{await w.put(`/api/contacts/${v.value.id}`,{name:a.value.name,email:a.value.email,subject:a.value.subject,message:a.value.message}),n.value=n.value.map(u=>u.id===v.value.id?{...v.value,...a.value}:u),b.value="Contact updated successfully!",E()}catch{m.value="Failed to update contact."}},F=async u=>{try{await w.delete(`/api/contacts/${u}`),n.value=n.value.filter(e=>e.id!==u)}catch{m.value="Failed to delete contact."}};return M(async()=>{try{const u=await w.get("/api/contacts");n.value=u.data.result}catch{m.value="Failed to load contacts."}finally{C.value=!1}}),(u,e)=>(f(),g("div",null,[e[16]||(e[16]=o("h2",null,"Contact Data",-1)),C.value?(f(),g("div",H,"Loading...")):V("",!0),m.value?(f(),g("div",J,D(m.value),1)):V("",!0),!C.value&&!m.value?(f(),_(l(B),{key:2,value:n.value,showGridlines:"",tableStyle:"min-width: 50rem"},{default:i(()=>[s(l(r),{field:"id",header:"ID"}),s(l(r),{field:"name",header:"Name"}),s(l(r),{field:"email",header:"Email"}),s(l(r),{field:"subject",header:"Subject"}),s(l(r),{field:"message",header:"Message"}),s(l(r),{header:"Action"},{body:i(c=>[s(l(y),{onClick:t=>q(c.data),class:"mr-3"},{default:i(()=>e[9]||(e[9]=[$("Edit")])),_:2},1032,["onClick"]),s(l(y),{onClick:t=>F(c.data.id)},{default:i(()=>e[10]||(e[10]=[$("Delete")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["value"])):V("",!0),s(l(z),{visible:p.value,"onUpdate:visible":e[8]||(e[8]=c=>p.value=c),header:"Edit Contact",style:{width:"25rem"}},{default:i(()=>[e[15]||(e[15]=o("span",{class:"text-surface-500 dark:text-surface-400 block mb-4"},"Update contact information.",-1)),s(l(L),{onSubmit:S},{default:i(({errors:c})=>[o("div",K,[e[11]||(e[11]=o("label",{for:"name",class:"font-semibold w-24"},"Name",-1)),s(l(x),{name:"name",modelValue:a.value.name,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.name=t),rules:"required"},{default:i(()=>[s(l(k),{id:"name",modelValue:a.value.name,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.name=t),class:"flex-auto ml-2"},null,8,["modelValue"])]),_:1},8,["modelValue"]),s(l(j),{name:"name",class:"error"})]),o("div",O,[e[12]||(e[12]=o("label",{for:"email",class:"font-semibold w-24"},"Email",-1)),s(l(x),{name:"email",modelValue:a.value.email,"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.email=t),rules:"required|email"},{default:i(()=>[s(l(k),{id:"email",modelValue:a.value.email,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.email=t),class:"flex-auto ml-2"},null,8,["modelValue"])]),_:1},8,["modelValue"]),s(l(j),{name:"email",class:"error"})]),o("div",Q,[e[13]||(e[13]=o("label",{for:"subject",class:"font-semibold w-24"},"Subject",-1)),s(l(x),{name:"subject",modelValue:a.value.subject,"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.subject=t),rules:"required"},{default:i(()=>[s(l(k),{id:"subject",modelValue:a.value.subject,"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.subject=t),class:"flex-auto ml-2"},null,8,["modelValue"])]),_:1},8,["modelValue"]),s(l(j),{name:"subject",class:"error"})]),o("div",W,[e[14]||(e[14]=o("label",{for:"message",class:"font-semibold w-24"},"Message",-1)),s(l(x),{name:"message",modelValue:a.value.message,"onUpdate:modelValue":e[7]||(e[7]=t=>a.value.message=t),rules:"required"},{default:i(()=>[A(o("textarea",{id:"message","onUpdate:modelValue":e[6]||(e[6]=t=>a.value.message=t),class:"flex-auto"},null,512),[[I,a.value.message]])]),_:1},8,["modelValue"]),s(l(j),{name:"message",class:"error"})]),o("div",X,[s(l(y),{type:"button",label:"Cancel",severity:"secondary",onClick:E}),s(l(y),{type:"submit",label:"Save"})])]),_:1})]),_:1},8,["visible"]),b.value?(f(),g("div",Y,D(b.value),1)):V("",!0)]))}}),se=T(Z,[["__scopeId","data-v-e785a874"]]);export{se as default};
